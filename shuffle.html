<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Shuffle a List</title>
    <meta name="description" content="Simple list shuffler" />
    <meta name="author" content="Rich Kuzsma" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    Shuffle a CSV list.
    <p>Usage: <code>shuffle.html?input=one,two,three&template=$ITEM\n</code>
    <hr>
    <textarea id="output" rows="50" cols="80">
    </textarea>
      <script>
        const queryParamsString = window.location.search.substr(1);
        const queryParams = queryParamsString.split('&').reduce((accumulator, singleQueryParam) => {
          const [key, value] = singleQueryParam.split('=');
          accumulator[key] = decodeURIComponent(value);
          return accumulator;
        }, {});
        
        function unraw(str) {
          // Half-baked opposite of String.raw
          return str.replaceAll("\\n", "\n").replaceAll("\\t", "\t").replaceAll("\\\\", "\\");
        }
        const inputList = queryParams['input'] || 'one,two,three';
        const template = unraw(queryParams['template'] || '$ITEM,');
        const inputArr = inputList.split(',');
        const randArr = [];

        function getRandomIntInclusive(min, max) {
          return Math.floor(Math.random() * (max - min + 1) + min);
        }

        inputArr.forEach(item => {
          const output = template.replace('$ITEM', item);
          const pos = getRandomIntInclusive(0, randArr.length);
          randArr.splice(pos, 0, output);
        });
        
        document.getElementById('output').value = randArr.join("");
      </script>

  </body>
</html>
